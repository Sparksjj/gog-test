import{d as ne,f as re}from"./chunk-ZKHJTDSU.js";import{a as p,b as oe,c as ie,d as ae}from"./chunk-NVHTPBOJ.js";import{$ as N,Da as c,Eb as ee,Fa as G,Ga as z,Ha as v,Hb as te,I as R,J as F,M as V,Na as M,Oa as C,P as q,Qa as h,Ra as $,S as a,Sa as J,Ta as W,Ua as o,Va as i,Wa as s,X as H,Xa as D,Z as x,Za as u,_ as S,_a as y,ca as B,db as m,eb as b,f as T,fb as K,gb as Q,ha as A,hb as X,ia as U,ja as w,jb as _,ka as g,kb as P,lb as Y,m as O,oa as Z,sb as I,va as l,z as L}from"./chunk-W6MYGBDL.js";var he=["lib-content",""],ce=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["","lib-content",""]],attrs:he,decls:1,vars:0,template:function(t,r){t&1&&s(0,"router-outlet")},dependencies:[re,ne],styles:["[_nghost-%COMP%]{flex:1;background:#c2c2c2;padding-bottom:2rem}"],changeDetection:0})}return e})();var se=(()=>{class e{cartItemsCount=a(p).cartItemsCount;static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["lib-cart-icon"]],decls:4,vars:1,consts:[["width","58","height","15","viewBox","4 0 17 15","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","Shape","opacity","0.851","fill-rule","evenodd","clip-rule","evenodd","d","M16.52 1.577L14.97 1.515L12.841 10.285L12.363 11.009H3.11399L2.75199 10.285L0.937988 2.886L2.67699 2.778L4.37299 9.499H11.139L13.456 0.529L14.442 0L16.969 0.032L16.52 1.577ZM5.31299 7.625V7.25H10.437V7.625H5.31299ZM4.99999 5.219H10.875V5.594H4.99999V5.219ZM4.24999 3.188H11.437V3.563H4.24999V3.188ZM4.78799 12.035C5.60299 12.035 6.26299 12.698 6.26299 13.517C6.26299 14.336 5.60299 15 4.78799 15C3.97399 15 3.31399 14.336 3.31399 13.517C3.31399 12.698 3.97399 12.035 4.78799 12.035ZM10.93 12.035C11.744 12.035 12.404 12.698 12.404 13.517C12.404 14.336 11.744 15 10.93 15C10.115 15 9.45499 14.336 9.45499 13.517C9.45499 12.698 10.115 12.035 10.93 12.035Z","fill","#262626"],["x","19","y","12",1,"cart-count","text-m"]],template:function(t,r){t&1&&(N(),o(0,"svg",0),s(1,"path",1),o(2,"text",2),m(3),i()()),t&2&&(l(3),K(" ",r.cartItemsCount()," "))},styles:[".cart-count[_ngcontent-%COMP%]{fill:var(--text-color-main-75)}"],changeDetection:0})}return e})();var ye=["lib-cart-item",""],le=(()=>{class e{cartStateService=a(p);el=a(w);deleting=g(!1);item=U.required();removeItem(){this.el.nativeElement.addEventListener("transitionend",()=>{this.cartStateService.removeItem(this.item())}),this.deleting.set(!0)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["","lib-cart-item",""]],hostAttrs:["tabIndex","0"],hostVars:2,hostBindings:function(t,r){t&2&&C("deleting",r.deleting())},inputs:{item:[1,"item"]},attrs:ye,decls:9,vars:8,consts:[[1,"image",3,"libPictureLoader","width","height","alt"],[1,"info"],[1,"info__title","text-l"],["type","button",1,"info__btn","text-sm",3,"click"],[1,"text-l"]],template:function(t,r){t&1&&(s(0,"div",0),o(1,"section",1)(2,"h4",2),m(3),i(),o(4,"button",3),u("click",function(){return r.removeItem()}),m(5," Remove "),i()(),o(6,"span",4),m(7),_(8,"currency"),i()),t&2&&(M("libPictureLoader",r.item().imagesPath)("width",100)("height",60)("alt",r.item().name),l(3),b(r.item().name),l(4),b(P(8,6,r.item().prise)))},dependencies:[ie,oe],styles:["[_nghost-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:.6rem;padding:.625rem;border-top:1px solid var(--border-color-main-100);color:var(--text-color-main-75);max-height:6.25rem}[_nghost-%COMP%]:hover   .info__btn[_ngcontent-%COMP%], [_nghost-%COMP%]:focus-within   .info__btn[_ngcontent-%COMP%]{opacity:1;max-height:1rem}.deleting[_nghost-%COMP%]{overflow:hidden;opacity:0;max-height:0;padding:0;transform:translate(-1em);transition:padding-top .3s ease-out,padding-bottom .3s ease-out,opacity .3s ease-out,max-height .3s ease-out,transform .3s ease-out}.image[_ngcontent-%COMP%]{width:6.25rem}.info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start;flex:1;text-transform:uppercase;min-width:1px}.info__title[_ngcontent-%COMP%]{width:100%;min-width:1px;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:1}.info__btn[_ngcontent-%COMP%]{margin:0;padding:0;background:none;border:none;outline:none;text-decoration:underline;cursor:pointer;opacity:0;max-height:0;transition:max-height .25s,opacity .25s}"],changeDetection:0})}return e})();var me=(()=>{class e{transform(n,t){return t===1?n:n+"s"}static \u0275fac=function(t){return new(t||e)};static \u0275pipe=z({name:"wordEnding",type:e,pure:!0})}return e})();var be=["lib-cart-sumary",""];function _e(e,f){if(e&1&&(o(0,"h3",1),m(1),_(2,"wordEnding"),i(),o(3,"span",3),m(4),_(5,"currency"),i()),e&2){let n=y();l(),Q(" ",n.cartItemsCount()," ",Y(2,3,"item",n.cartItemsCount())," in cart "),l(3),b(P(5,6,n.totalPrice()))}}function xe(e,f){e&1&&(o(0,"h3",1),m(1,"No items in the cart"),i())}function Se(e,f){if(e&1){let n=D();o(0,"button",4),u("click",function(){x(n);let r=y();return S(r.onClearCart())}),m(1," Clear cart "),i()}}var pe=(()=>{class e{cartStateService=a(p);clearCart=A();cartItemsCount=this.cartStateService.cartItemsCount;totalPrice=I(()=>this.cartStateService.cartItems().reduce((n,t)=>n+(t.prise??0),0));onClearCart(){this.clearCart.emit()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["","lib-cart-sumary",""]],outputs:{clearCart:"clearCart"},attrs:be,decls:4,vars:2,consts:[[1,"info"],[1,"info__title","text-xl"],["type","button","lib-button","",1,"clear"],[1,"info__prise","text-xl"],["type","button","lib-button","",1,"clear",3,"click"]],template:function(t,r){t&1&&(o(0,"section",0),v(1,_e,6,8)(2,xe,2,0,"h3",1),i(),v(3,Se,2,0,"button",2)),t&2&&(l(),h(r.cartItemsCount()?1:2),l(2),h(r.cartItemsCount()?3:-1))},dependencies:[ae,ee,me],styles:["[_nghost-%COMP%]{display:flex;min-height:3.94rem;justify-content:space-between;align-items:center;gap:.5rem;padding:.625rem}.info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex:1;gap:.5rem;text-transform:uppercase;color:var(--text-color-main-100)}.info__title[_ngcontent-%COMP%]{margin:0}.clear[_ngcontent-%COMP%]{min-width:8.25rem}"],changeDetection:0})}return e})();function we(e,f){if(e&1&&s(0,"div",2),e&2){let n=f.$implicit;M("item",n)}}var de=(()=>{class e{cartStateService=a(p);el=a(w);items=this.cartStateService.cartItems;deleting=g(!1);clearCart(){this.el.nativeElement.querySelector("#items-in-cart").addEventListener("transitionend",()=>{this.cartStateService.clearCart()}),this.deleting.set(!0)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["lib-cart-popover"]],decls:4,vars:2,consts:[["lib-cart-sumary","",3,"clearCart"],["id","items-in-cart"],["lib-cart-item","",1,"cart-item",3,"item"]],template:function(t,r){t&1&&(o(0,"header",0),u("clearCart",function(){return r.clearCart()}),i(),o(1,"section",1),J(2,we,1,1,"div",2,$),i()),t&2&&(l(),C("deleting",r.deleting()),l(),W(r.items()))},dependencies:[pe,le],styles:["[_nghost-%COMP%]{position:absolute;top:100%;right:0;width:23.125rem;background:var(--background-alt);border-right:1px solid var(--border-color-main-100)}.cart-item[_ngcontent-%COMP%]{opacity:1;transition:opacity .2s ease-out,transform .5s ease-out}@starting-style{.cart-item[_ngcontent-%COMP%]{opacity:0;transform:translate(-1rem)}}#items-in-cart[_ngcontent-%COMP%]{opacity:1}#items-in-cart.deleting[_ngcontent-%COMP%]{overflow:hidden;opacity:.7;transform:translate(-1em);transition:opacity .3s ease-out,transform .3s ease-out}#items-in-cart.deleting[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]{overflow:hidden;max-height:0;padding:0;transition:max-height .5s ease-out,padding-top .5s ease-out,padding-bottom .5s ease-out}"],changeDetection:0})}return e})();var Me=["lib-cart",""];function De(e,f){if(e&1){let n=D();s(0,"lib-cart-popover"),o(1,"div",1),u("click",function(){x(n);let r=y();return S(r.toggleCart())}),i()}}var ue=(()=>{class e{showCart=g(!1);toggleCart(){this.showCart.update(n=>!n)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["","lib-cart",""]],attrs:Me,decls:3,vars:3,consts:[["type","button",1,"card-btn",3,"click"],[1,"backdrop",3,"click"]],template:function(t,r){t&1&&(o(0,"button",0),u("click",function(){return r.toggleCart()}),s(1,"lib-cart-icon"),i(),v(2,De,2,0)),t&2&&(C("active",r.showCart()),l(2),h(r.showCart()?2:-1))},dependencies:[se,de],styles:[".cart-count[_ngcontent-%COMP%]{fill:var(--text-color-main-75)}lib-cart-popover[_ngcontent-%COMP%]{z-index:2;transition-property:opacity,transform;transition-duration:.3s}@starting-style{lib-cart-popover[_ngcontent-%COMP%]{opacity:0;transform:translate(-1rem,-1rem)}}.backdrop[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:.3s}@starting-style{.backdrop[_ngcontent-%COMP%]{opacity:0}}.card-btn[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;margin:0;padding:0;z-index:2;background:transparent;border:none;border-left:1px solid transparent;border-right:1px solid transparent;transition:background-color .2s,border-color .2s}.card-btn[_ngcontent-%COMP%]:hover, .card-btn.active[_ngcontent-%COMP%]{background-color:var(--background-alt);border-color:var(--border-color-main-100)}.backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:var(--gradient-main-bg)}"],changeDetection:0})}return e})();var fe={length:0,clear:()=>{},getItem:e=>null,key:e=>null,removeItem:e=>{},setItem:(e,f)=>{}};var ge=new q("Local Storage",{factory:()=>{let e=a(Z);return te(e)?fe:localStorage}});var k=(()=>{class e{storage=a(ge);getItems(){let n=[];try{n=JSON.parse(this.storage.getItem("cart")||"[]")}catch(t){console.error("Error parsing cart data from localStorage",t)}return O(n)}saveItems(n){try{this.storage.setItem("cart",JSON.stringify(n))}catch(t){console.error("Error saving cart data to localStorage",t)}return O()}static \u0275fac=function(t){return new(t||e)};static \u0275prov=V({token:e,factory:e.\u0275fac})}return e})();function E(e){e||(H(E),e=a(B));let f=new T(n=>e.onDestroy(n.next.bind(n)));return n=>n.pipe(F(f))}var Ce=(()=>{class e{cartStateService=a(p);cartDataService=a(k);constructor(){this.cartStateService.isNeedToSync$.pipe(E(),L(500),R(()=>this.cartDataService.saveItems(this.cartStateService.cartItems()))).subscribe()}ngOnInit(){this.getCartItems()}getCartItems(){this.cartDataService.getItems().subscribe(n=>{this.cartStateService.resetCart(n,!1)})}static \u0275fac=function(t){return new(t||e)};static \u0275dir=G({type:e,selectors:[["","lib-cart-data-sync",""]]})}return e})();var Pe=["lib-nav",""],ve=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["","lib-nav",""]],features:[X([k])],attrs:Pe,decls:4,vars:0,consts:[[1,"content"],["href","/",1,"logo"],["width","43","height","37","src","/assets/images/logo.svg","alt","GoG Logo"],["lib-cart-data-sync","","lib-cart","",1,"nav-card"]],template:function(t,r){t&1&&(o(0,"section",0)(1,"a",1),s(2,"img",2),i(),s(3,"section",3),i())},dependencies:[ue,Ce],styles:["[_nghost-%COMP%]{padding:0 1%;position:sticky;display:flex;justify-content:center;top:0;height:3.688rem;background:var(--gradient-nav);z-index:2}.content[_ngcontent-%COMP%]{max-width:var(--content-width);position:relative;display:flex;align-items:center;justify-content:space-between;flex:1}.nav-card[_ngcontent-%COMP%]{min-width:3.625rem;height:100%}"],changeDetection:0})}return e})();var an=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["lib-shell"]],decls:2,vars:0,consts:[["lib-nav",""],["lib-content",""]],template:function(t,r){t&1&&s(0,"nav",0)(1,"main",1)},dependencies:[ve,ce],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh}"],changeDetection:0})}return e})();export{an as ShellComponent};
