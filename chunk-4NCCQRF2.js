import{d as ot,f as at}from"./chunk-MHLRR55Q.js";import{a as p,b as ct,c as st,d as lt}from"./chunk-KKZXDIHQ.js";import{$ as w,Fa as s,Ha as J,I as q,Ia as W,J as H,Ja as v,Kb as it,N as A,Nb as rt,Pa as h,Q as N,Ra as C,T as a,Ta as b,Ua as K,Va as Q,Wa as X,Xa as o,Y as B,Ya as r,Za as l,_ as S,_a as I,aa as z,ab as f,ba as U,bb as y,ea as Z,f as F,hb as m,ib as _,ja as G,jb as Y,ka as M,kb as tt,la as P,lb as et,m as k,ma as d,nb as x,ob as O,pb as nt,qa as $,wb as E,xa as c,xb as T,yb as j,z as V}from"./chunk-HMNEPUY6.js";var _t=["lib-content",""],mt=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=s({type:t,selectors:[["","lib-content",""]],attrs:_t,decls:1,vars:0,template:function(e,i){e&1&&l(0,"router-outlet")},dependencies:[at,ot],styles:["[_nghost-%COMP%]{flex:1;background:#c2c2c2;padding-bottom:2rem}"],changeDetection:0})}return t})();var dt=(()=>{class t{showCart=M.required();cartItemsCount=a(p).cartItemsCount;filled=d(this.cartItemsCount()>0);animated=d(this.cartItemsCount()>0);timeoutId;previousState={count:this.cartItemsCount()};constructor(){j(()=>{let n=this.cartItemsCount(),e=this.showCart();!e&&n>this.previousState.count?(this.filled.set(!0),this.animated.set(!0),this.scheduleRestartAnimation()):e&&this.filled.set(!1),this.previousState.count=n})}ngOnDestroy(){this.timeoutId&&clearTimeout(this.timeoutId)}scheduleRestartAnimation(){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{E(()=>{this.animated.set(!1)})},600)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=s({type:t,selectors:[["lib-cart-icon"]],inputs:{showCart:[1,"showCart"]},decls:4,vars:5,consts:[["width","17","height","15","viewBox","0 0 17 15","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","Shape","opacity","0.851","fill-rule","evenodd","clip-rule","evenodd","d","M16.52 1.577L14.97 1.515L12.841 10.285L12.363 11.009H3.11399L2.75199 10.285L0.937988 2.886L2.67699 2.778L4.37299 9.499H11.139L13.456 0.529L14.442 0L16.969 0.032L16.52 1.577ZM5.31299 7.625V7.25H10.437V7.625H5.31299ZM4.99999 5.219H10.875V5.594H4.99999V5.219ZM4.24999 3.188H11.437V3.563H4.24999V3.188ZM4.78799 12.035C5.60299 12.035 6.26299 12.698 6.26299 13.517C6.26299 14.336 5.60299 15 4.78799 15C3.97399 15 3.31399 14.336 3.31399 13.517C3.31399 12.698 3.97399 12.035 4.78799 12.035ZM10.93 12.035C11.744 12.035 12.404 12.698 12.404 13.517C12.404 14.336 11.744 15 10.93 15C10.115 15 9.45499 14.336 9.45499 13.517C9.45499 12.698 10.115 12.035 10.93 12.035Z","fill","#262626"],["animation","none",1,"count","text-m"]],template:function(e,i){e&1&&(z(),o(0,"svg",0),l(1,"path",1),r(),U(),o(2,"span",2),m(3),r()),e&2&&(c(2),C("animated",i.animated())("filled",i.filled()),c(),Y(" ",i.cartItemsCount(),`
`))},styles:['[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center}.count[_ngcontent-%COMP%]{position:relative;top:1px;right:1px;display:flex;align-items:center;height:13px;border-radius:2px;padding:0 3px;line-height:1;color:var(--text-color-main-75)}.count.filled[_ngcontent-%COMP%]{background:#6c36ad;color:var(--text-color-alt-100);font-weight:400}.count.animated[_ngcontent-%COMP%]:after{content:"";opacity:0;position:absolute;inset:0;outline:5px solid #b65ae2;border-radius:100%;animation-name:_ngcontent-%COMP%_ripple;animation-duration:.5s;animation-delay:0s;animation-iteration-count:1;animation-timing-function:cubic-bezier(.65,0,.34,1);z-index:-1}.count.animated[_ngcontent-%COMP%]:before{content:"";opacity:0;position:absolute;inset:0;outline:5px solid #b65ae2;border-radius:100%;animation-name:_ngcontent-%COMP%_ripple;animation-duration:.5s;animation-delay:.2s;animation-iteration-count:1;animation-timing-function:cubic-bezier(.65,0,.34,1);z-index:-1}@keyframes _ngcontent-%COMP%_ripple{0%{opacity:1;transform:scale3d(.75,.75,1)}to{opacity:0;transform:scale3d(1.5,1.5,1)}}'],changeDetection:0})}return t})();var xt=["lib-cart-item",""],pt=(()=>{class t{cartStateService=a(p);el=a(P);deleting=d(!1);item=M.required();removeItem(){this.el.nativeElement.addEventListener("transitionend",()=>{this.cartStateService.removeItem(this.item())}),this.deleting.set(!0)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=s({type:t,selectors:[["","lib-cart-item",""]],hostAttrs:["tabIndex","0"],hostVars:2,hostBindings:function(e,i){e&2&&C("deleting",i.deleting())},inputs:{item:[1,"item"]},attrs:xt,decls:9,vars:8,consts:[[1,"image",3,"libPictureLoader","width","height","alt"],[1,"info"],[1,"info__title","text-l"],["aria-label","Remove from cart","type","button","tabindex","0",1,"info__btn","text-sm",3,"click"],[1,"text-l"]],template:function(e,i){e&1&&(l(0,"div",0),o(1,"section",1)(2,"h4",2),m(3),r(),o(4,"button",3),f("click",function(){return i.removeItem()}),m(5," Remove "),r()(),o(6,"span",4),m(7),x(8,"currency"),r()),e&2&&(h("libPictureLoader",i.item().imagesPath)("width",100)("height",60)("alt",i.item().name),c(3),_(i.item().name),c(4),_(O(8,6,i.item().prise)))},dependencies:[st,ct],styles:["[_nghost-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:.6rem;padding:.625rem;border-top:1px solid var(--border-color-main-100);color:var(--text-color-main-75);max-height:6.25rem}[_nghost-%COMP%]:hover   .info__btn[_ngcontent-%COMP%], [_nghost-%COMP%]:focus-within   .info__btn[_ngcontent-%COMP%]{opacity:1;max-height:1rem}.deleting[_nghost-%COMP%]{overflow:hidden;opacity:0;max-height:0;padding:0;transform:translate(-1em);transition:padding-top .3s ease-out,padding-bottom .3s ease-out,opacity .3s ease-out,max-height .3s ease-out,transform .3s ease-out}.image[_ngcontent-%COMP%]{width:6.25rem}.info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start;flex:1;text-transform:uppercase;min-width:1px}.info__title[_ngcontent-%COMP%]{width:100%;min-width:1px;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:1}.info__btn[_ngcontent-%COMP%]{margin:0;padding:0;background:none;border-radius:2px;border:none;outline:none;text-decoration:underline;cursor:pointer;opacity:0;max-height:0;transition:max-height .25s,opacity .25s}.info__btn[_ngcontent-%COMP%]:focus-within{outline:1px solid rgba(0,0,0,.3)}"],changeDetection:0})}return t})();var ut=(()=>{class t{transform(n,e){return e===1?n:n+"s"}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=W({name:"wordEnding",type:t,pure:!0})}return t})();var St=["lib-cart-sumary",""];function wt(t,g){if(t&1&&(o(0,"h3",1),m(1),x(2,"wordEnding"),r(),o(3,"span",3),m(4),x(5,"currency"),r()),t&2){let n=y();c(),tt(" ",n.cartItemsCount()," ",nt(2,3,"item",n.cartItemsCount())," in cart "),c(3),_(O(5,6,n.totalPrice()))}}function Mt(t,g){t&1&&(o(0,"h3",1),m(1,"No items in the cart"),r())}function Pt(t,g){if(t&1){let n=I();o(0,"button",4),f("click",function(){S(n);let i=y();return w(i.onClearCart())}),m(1," Clear cart "),r()}}var ft=(()=>{class t{cartStateService=a(p);clearCart=G();cartItemsCount=this.cartStateService.cartItemsCount;totalPrice=T(()=>this.cartStateService.cartItems().reduce((n,e)=>n+(e.prise??0),0));onClearCart(){this.clearCart.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=s({type:t,selectors:[["","lib-cart-sumary",""]],outputs:{clearCart:"clearCart"},attrs:St,decls:4,vars:2,consts:[[1,"info"],[1,"info__title","text-xl"],["aria-label","Clear cart","type","button","lib-button","",1,"clear"],[1,"info__prise","text-xl"],["aria-label","Clear cart","type","button","lib-button","",1,"clear",3,"click"]],template:function(e,i){e&1&&(o(0,"section",0),v(1,wt,6,8)(2,Mt,2,0,"h3",1),r(),v(3,Pt,2,0,"button",2)),e&2&&(c(),b(i.cartItemsCount()?1:2),c(2),b(i.cartItemsCount()?3:-1))},dependencies:[lt,it,ut],styles:["[_nghost-%COMP%]{display:flex;min-height:3.94rem;justify-content:space-between;align-items:center;gap:.5rem;padding:.625rem}.info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex:1;gap:.5rem;text-transform:uppercase;color:var(--text-color-main-100)}.info__title[_ngcontent-%COMP%]{margin:0}.clear[_ngcontent-%COMP%]{min-width:8.25rem}"],changeDetection:0})}return t})();function It(t,g){if(t&1&&l(0,"div",2),t&2){let n=g.$implicit;h("item",n)}}var gt=(()=>{class t{cartStateService=a(p);el=a(P);items=this.cartStateService.cartItems;deleting=d(!1);get itemsInCartHtmlEl(){return this.el.nativeElement.querySelector("#items-in-cart")}clearFunction=(()=>{this.cartStateService.clearCart(),this.itemsInCartHtmlEl?.removeEventListener("transitionend",this.clearFunction),this.deleting.set(!1)}).bind(this);clearCart(){this.itemsInCartHtmlEl?.addEventListener("transitionend",this.clearFunction),this.deleting.set(!0)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=s({type:t,selectors:[["lib-cart-popover"]],decls:4,vars:2,consts:[["lib-cart-sumary","",3,"clearCart"],["id","items-in-cart"],["lib-cart-item","",1,"cart-item",3,"item"]],template:function(e,i){e&1&&(o(0,"header",0),f("clearCart",function(){return i.clearCart()}),r(),o(1,"section",1),Q(2,It,1,1,"div",2,K),r()),e&2&&(c(),C("deleting",i.deleting()),c(),X(i.items()))},dependencies:[ft,pt],styles:["[_nghost-%COMP%]{position:absolute;top:100%;right:0;width:23.125rem;background:var(--background-alt);border-right:1px solid var(--border-color-main-100)}.cart-item[_ngcontent-%COMP%]{opacity:1;transition:opacity .2s ease-out,transform .5s ease-out}@starting-style{.cart-item[_ngcontent-%COMP%]{opacity:0;transform:translate(-1rem)}}#items-in-cart[_ngcontent-%COMP%]{opacity:1}#items-in-cart.deleting[_ngcontent-%COMP%]{transform:translate(-1em);transition:transform .3s ease-out}#items-in-cart.deleting[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]{max-height:0;padding:0;opacity:0;transition:opacity .2s ease-out,max-height .3s ease-out,padding-top .3s ease-out,padding-bottom .3s ease-out}"],changeDetection:0})}return t})();var Ot=["lib-cart",""];function Dt(t,g){if(t&1){let n=I();l(0,"lib-cart-popover"),o(1,"div",2),f("click",function(){S(n);let i=y();return w(i.toggleCart())}),r()}}var Ct=(()=>{class t{showCart=d(!1);toggleCart(){this.showCart.update(n=>!n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=s({type:t,selectors:[["","lib-cart",""]],attrs:Ot,decls:3,vars:4,consts:[["type","button","tabindex","0","aria-label","Open cart",1,"card-btn",3,"click"],[3,"showCart"],[1,"backdrop",3,"click"]],template:function(e,i){e&1&&(o(0,"button",0),f("click",function(){return i.toggleCart()}),l(1,"lib-cart-icon",1),r(),v(2,Dt,2,0)),e&2&&(C("active",i.showCart()),c(),h("showCart",i.showCart()),c(),b(i.showCart()?2:-1))},dependencies:[dt,gt],styles:[".cart-count[_ngcontent-%COMP%]{fill:var(--text-color-main-75)}lib-cart-popover[_ngcontent-%COMP%]{z-index:2;transition-property:opacity,transform;transition-duration:.3s}@starting-style{lib-cart-popover[_ngcontent-%COMP%]{opacity:0;transform:translate(-1rem,-1rem)}}.backdrop[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:.3s}@starting-style{.backdrop[_ngcontent-%COMP%]{opacity:0}}.card-btn[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;margin:0;padding:0;z-index:2;background:transparent;border:none;border-left:1px solid transparent;border-right:1px solid transparent;transition:background-color .2s,border-color .2s}.card-btn[_ngcontent-%COMP%]:hover, .card-btn.active[_ngcontent-%COMP%]{background-color:var(--background-alt);border-color:var(--border-color-main-100)}.backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:var(--gradient-main-bg)}"],changeDetection:0})}return t})();var ht={length:0,clear:()=>{},getItem:t=>null,key:t=>null,removeItem:t=>{},setItem:(t,g)=>{}};var vt=new N("Local Storage",{factory:()=>{let t=a($);return rt(t)?ht:localStorage}});var D=(()=>{class t{storage=a(vt);getItems(){let n=[];try{n=JSON.parse(this.storage.getItem("cart")||"[]")}catch(e){console.error("Error parsing cart data from localStorage",e)}return k(n)}saveItems(n){try{this.storage.setItem("cart",JSON.stringify(n))}catch(e){console.error("Error saving cart data to localStorage",e)}return k()}static \u0275fac=function(e){return new(e||t)};static \u0275prov=A({token:t,factory:t.\u0275fac})}return t})();function L(t){t||(B(L),t=a(Z));let g=new F(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(H(g))}var bt=(()=>{class t{cartStateService=a(p);cartDataService=a(D);constructor(){this.cartStateService.isNeedToSync$.pipe(L(),V(500),q(()=>this.cartDataService.saveItems(this.cartStateService.cartItems()))).subscribe()}ngOnInit(){this.getCartItems()}getCartItems(){this.cartDataService.getItems().subscribe(n=>{this.cartStateService.resetCart(n,!1)})}static \u0275fac=function(e){return new(e||t)};static \u0275dir=J({type:t,selectors:[["","lib-cart-data-sync",""]]})}return t})();var kt=["lib-nav",""],yt=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=s({type:t,selectors:[["","lib-nav",""]],features:[et([D])],attrs:kt,decls:4,vars:0,consts:[[1,"content"],["href","/",1,"logo"],["width","43","height","37","src","assets/images/logo.svg","alt","GoG Logo"],["lib-cart-data-sync","","lib-cart","",1,"nav-card"]],template:function(e,i){e&1&&(o(0,"section",0)(1,"a",1),l(2,"img",2),r(),l(3,"section",3),r())},dependencies:[Ct,bt],styles:["[_nghost-%COMP%]{padding:0 1%;position:sticky;display:flex;justify-content:center;top:0;height:3.688rem;background:var(--gradient-nav);z-index:2}.content[_ngcontent-%COMP%]{max-width:var(--content-width);position:relative;display:flex;align-items:center;justify-content:space-between;flex:1}.nav-card[_ngcontent-%COMP%]{min-width:3.625rem;height:100%}"],changeDetection:0})}return t})();var cn=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=s({type:t,selectors:[["lib-shell"]],decls:2,vars:0,consts:[["lib-nav",""],["lib-content",""]],template:function(e,i){e&1&&l(0,"nav",0)(1,"main",1)},dependencies:[yt,mt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh}"],changeDetection:0})}return t})();export{cn as ShellComponent};
